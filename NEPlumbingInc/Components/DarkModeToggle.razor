@inject DarkModeService DarkModeService
@inject IJSRuntime JS
@rendermode InteractiveServer

<button class="dark-mode-toggle" @onclick="ToggleDarkMode" type="button" title="Toggle dark mode">
    <i class="fas @(DarkModeService.IsDarkMode ? "fa-sun" : "fa-moon")"></i>
</button>

<style>
    /* Dark mode toggle button */
    .dark-mode-toggle {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        font-size: 1.5rem;
        padding: 0.5rem;
        transition: transform 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        pointer-events: auto;
        position: relative;
        z-index: 11;
    }

    .dark-mode-toggle:hover {
        transform: scale(1.1);
    }

    .dark-mode-toggle:focus {
        outline: 2px solid rgba(255, 255, 255, 0.5);
        outline-offset: 2px;
    }
</style>

@code {
    private async Task ToggleDarkMode()
    {
        DarkModeService.IsDarkMode = !DarkModeService.IsDarkMode;
        try
        {
            await JS.InvokeVoidAsync("localStorage.setItem", "darkMode", DarkModeService.IsDarkMode.ToString().ToLower());
        }
        catch
        {
            // If JS interop fails, still toggle the mode locally
        }
        StateHasChanged();
    }
}

